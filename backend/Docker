# Image officielle GDAL avec tous les drivers
FROM osgeo/gdal:ubuntu-small-latest

# Définir le dossier de travail
WORKDIR /app

# Copier le code source
COPY . .

# Installer pip et dépendances Python
RUN pip install --no-cache-dir --upgrade pip setuptools wheel
RUN pip install --no-cache-dir -r requirements.txt

# Exposer le port (optionnel, juste pour documentation)
EXPOSE 10000

# Lancer l'API avec le port fourni par Render
CMD ["gunicorn", "app:app", "--bind", "0.0.0.0:$PORT", "--workers", "1"]
